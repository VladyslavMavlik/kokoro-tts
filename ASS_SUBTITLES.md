# ASS –°—É–±—Ç–∏—Ç—Ä–∏ –∑ –ö–∞—Ä–∞–æ–∫–µ-–ï—Ñ–µ–∫—Ç–æ–º (Word Highlighting) üé§‚ú®

## –©–æ –Ω–æ–≤–æ–≥–æ?

–¢–µ–ø–µ—Ä —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä—É—î **–ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ ASS —Å—É–±—Ç–∏—Ç—Ä–∏ –∑ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è–º –∫–æ–∂–Ω–æ–≥–æ —Å–ª–æ–≤–∞** –≤ –º–æ–º–µ–Ω—Ç –π–æ–≥–æ –∑–≤—É—á–∞–Ω–Ω—è - —è–∫ —É –≤—ñ–¥–µ–æ –Ω–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ!

### –ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –µ—Ñ–µ–∫—Ç—É:
```
00:01.00: [and] the sky is a bruised shade of purple
00:01.20: and [the] sky is a bruised shade of purple
00:01.40: and the [sky] is a bruised shade of purple
00:01.70: and the sky [is] a bruised shade of purple
...
```

–ö–æ–∂–Ω–µ —Å–ª–æ–≤–æ –ø—ñ–¥—Å–≤—ñ—á—É—î—Ç—å—Å—è **–∂–æ–≤—Ç–∏–º –∫–æ–ª—å–æ—Ä–æ–º** —Ç–æ—á–Ω–æ –≤ –º–æ–º–µ–Ω—Ç –∑–≤—É—á–∞–Ω–Ω—è!

---

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)

–°–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–æ–≤—ñ ASS —Å—É–±—Ç–∏—Ç—Ä–∏ –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É `build_slideshow.js`:

```bash
node build_slideshow.js \
  --images_dir=/path/to/images \
  --audio=/path/to/audio.mp3 \
  --out=/path/to/output.mp4
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. ‚úÖ faster-whisper —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±—É—î –∞—É–¥—ñ–æ –∑ word-level timestamps
2. ‚úÖ –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è ASS —Å—É–±—Ç–∏—Ç—Ä–∏ –∑ –∫–∞—Ä–∞–æ–∫–µ-–µ—Ñ–µ–∫—Ç–æ–º (`\kf` —Ç–µ–≥–∏)
3. ‚úÖ –í—ñ–¥–µ–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∑ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è–º —Å–ª—ñ–≤

---

## üìã –†—É—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç—ñ–ª—å–∫–∏ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤:

```bash
python3 generate_ass_subs.py \
  audio.mp3 \
  output.ass \
  --model base \
  --words-per-subtitle 5
```

**–û–ø—Ü—ñ—ó:**
- `--model` - —Ä–æ–∑–º—ñ—Ä –º–æ–¥–µ–ª—ñ Whisper: `tiny`, `base`, `small`, `medium`, `large` (default: `base`)
- `--device` - –ø—Ä–∏—Å—Ç—Ä—ñ–π: `cpu`, `cuda` (default: `cpu`)
- `--compute-type` - —Ç–∏–ø –æ–±—á–∏—Å–ª–µ–Ω—å: `int8`, `float16`, `float32` (default: `int8`)
- `--words-per-subtitle` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤ –Ω–∞ —Å—É–±—Ç–∏—Ç—Ä (default: 5)
- `--save-json` - –∑–±–µ—Ä–µ–≥—Ç–∏ JSON —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—é

**–ü—Ä–∏–∫–ª–∞–¥–∏:**

```bash
# –®–≤–∏–¥–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è (tiny model)
python3 generate_ass_subs.py voice.mp3 subs.ass --model tiny

# –¢–æ—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è (large model, GPU)
python3 generate_ass_subs.py voice.mp3 subs.ass --model large --device cuda

# –ë–∞–≥–∞—Ç–æ —Å–ª—ñ–≤ –Ω–∞ —Å—É–±—Ç–∏—Ç—Ä (–±—ñ–ª—å—à –ø–æ–≤—ñ–ª—å–Ω–∞ –∑–º—ñ–Ω–∞)
python3 generate_ass_subs.py voice.mp3 subs.ass --words-per-subtitle 8
```

---

## üé® –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–∏–ª—é

### –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—ñ–≤

–í—ñ–¥–∫—Ä–∏–π—Ç–µ `generate_ass_subs.py` —Ç–∞ –∑–º—ñ–Ω—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é `create_ass_style()`:

```python
def create_ass_style():
    style = SSAStyle()

    # –®—Ä–∏—Ñ—Ç
    style.fontname = "Impact"  # –ó–º—ñ–Ω—ñ—Ç—å –Ω–∞ –±—É–¥—å-—è–∫–∏–π —à—Ä–∏—Ñ—Ç
    style.fontsize = 32        # –†–æ–∑–º—ñ—Ä
    style.bold = True          # –ñ–∏—Ä–Ω–∏–π

    # –ö–æ–ª—å–æ—Ä–∏ (RGBA format)
    style.primary_color = pysubs2.Color(r=255, g=255, b=255, a=0)  # –ë—ñ–ª–∏–π

    # –û–±–≤–µ–¥–µ–Ω–Ω—è —Ç–∞ —Ç—ñ–Ω—å
    style.outline = 2          # –¢–æ–≤—â–∏–Ω–∞ –æ–±–≤–µ–¥–µ–Ω–Ω—è
    style.shadow = 1           # –¢—ñ–Ω—å
    style.outline_color = pysubs2.Color(r=0, g=0, b=0, a=0)  # –ß–æ—Ä–Ω–µ –æ–±–≤–µ–¥–µ–Ω–Ω—è

    # –ü–æ–∑–∏—Ü—ñ—è
    style.alignment = 2        # 2 = –∑–Ω–∏–∑—É –ø–æ —Ü–µ–Ω—Ç—Ä—É
    style.marginv = 40         # –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –Ω–∏–∑—É (px)

    return style
```

### –ó–º—ñ–Ω–∞ –∫–æ–ª—å–æ—Ä—É –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è

–£ —Ñ—É–Ω–∫—Ü—ñ—ó `generate_ass_subtitles()` –∑–º—ñ–Ω—ñ—Ç–µ –∫–æ–ª—ñ—Ä —É —Ç–µ–≥–∞—Ö:

```python
# –ü–æ—Ç–æ—á–Ω–∏–π: –∂–æ–≤—Ç–∏–π
ass_text += f"{{\\kf{duration_cs}\\c&H00FFFF&}}{word['word']} "

# –ß–µ—Ä–≤–æ–Ω–∏–π (BGR: 0, 0, 255)
ass_text += f"{{\\kf{duration_cs}\\c&H0000FF&}}{word['word']} "

# –ó–µ–ª–µ–Ω–∏–π (BGR: 0, 255, 0)
ass_text += f"{{\\kf{duration_cs}\\c&H00FF00&}}{word['word']} "

# –ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π (BGR: 0, 165, 255)
ass_text += f"{{\\kf{duration_cs}\\c&H00A5FF&}}{word['word']} "
```

**–£–≤–∞–≥–∞:** ASS –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–æ—Ä–º–∞—Ç BGR (–Ω–µ RGB)!

---

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

1. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è:**
   - `faster-whisper` (–æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è Whisper)
   - Word-level timestamps (—Ç–æ—á–Ω—ñ—Å—Ç—å ¬±20-50ms)
   - INT8 quantization –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –ø–∞–º'—è—Ç—ñ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–≤–∏

2. **–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è —Å–ª—ñ–≤:**
   - –ì—Ä—É–ø–∏ –ø–æ 5 —Å–ª—ñ–≤ (–Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è)
   - –†–æ–∑—É–º–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª —á–∞—Å—É –º—ñ–∂ —Å–ª–æ–≤–∞–º–∏

3. **ASS —Ç–µ–≥–∏:**
   - `\kf` - karaoke fill (–ø–ª–∞–≤–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è)
   - `\c&H00FFFF&` - inline –∫–æ–ª—ñ—Ä –¥–ª—è –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è
   - Centisecond precision (1/100 —Å–µ–∫—É–Ω–¥–∏)

### –§–æ—Ä–º–∞—Ç ASS —Ç–µ–≥—ñ–≤

```ass
{\kf<duration>\c&H00FFFF&}word
```

- `\kf` - karaoke fill effect
- `<duration>` - —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –≤ —Å–∞–Ω—Ç–∏—Å–µ–∫—É–Ω–¥–∞—Ö (1/100 —Å)
- `\c&H00FFFF&` - –∫–æ–ª—ñ—Ä –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è (–∂–æ–≤—Ç–∏–π —É BGR)

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ —Å—Ç–∞—Ä–æ—é —Å–∏—Å—Ç–µ–º–æ—é

| –§—É–Ω–∫—Ü—ñ—è | –°—Ç–∞—Ä–∞ —Å–∏—Å—Ç–µ–º–∞ (SRT) | –ù–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ (ASS) |
|---------|---------------------|---------------------|
| **–ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è —Å–ª—ñ–≤** | ‚ùå –í–µ—Å—å —Ä—è–¥–æ–∫ –æ–¥—Ä–∞–∑—É | ‚úÖ –ö–æ–∂–Ω–µ —Å–ª–æ–≤–æ –æ–∫—Ä–µ–º–æ |
| **–¢–æ—á–Ω—ñ—Å—Ç—å timestamps** | ¬±100-200ms | ‚úÖ ¬±20-50ms |
| **–®–≤–∏–¥–∫—ñ—Å—Ç—å** | Whisper base | ‚úÖ faster-whisper (4-5x) |
| **–ö–æ–ª—å–æ—Ä–∏** | –û–±–º–µ–∂–µ–Ω—ñ | ‚úÖ –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å (inline —Ç–µ–≥–∏) |
| **–ê–Ω—ñ–º–∞—Ü—ñ—ó** | ‚ùå –ù—ñ | ‚úÖ –ö–∞—Ä–∞–æ–∫–µ fill, fade, —Ç–æ—â–æ |
| **–®—Ä–∏—Ñ—Ç–∏** | –°–∏—Å—Ç–µ–º–Ω—ñ | ‚úÖ Custom fonts |
| **–ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è** | –ë–∞–∑–æ–≤–µ | ‚úÖ Pixel-perfect |

---

## ‚ö†Ô∏è –í–∏–º–æ–≥–∏

### Python –ø–∞–∫–µ—Ç–∏:
```bash
pip3 install faster-whisper pysubs2
```

### –°–∏—Å—Ç–µ–º–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
- Python 3.8+
- ffmpeg –∑ libass –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é (–¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É)
- 2GB+ RAM (–¥–ª—è –º–æ–¥–µ–ª—ñ base)

---

## üêõ Troubleshooting

### –ü–æ–º–∏–ª–∫–∞: "Missing Python packages"
```bash
pip3 install --upgrade faster-whisper pysubs2
```

### –ü–æ–º–∏–ª–∫–∞: "Model download failed"
–ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –º–æ–¥–µ–ª—å (~150MB –¥–ª—è base). –ü–æ—Ç—Ä—ñ–±–µ–Ω —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç.

### –°—É–±—Ç–∏—Ç—Ä–∏ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —É –≤—ñ–¥–µ–æ
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ ffmpeg –º–∞—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É libass:
```bash
ffmpeg -filters | grep subtitles
```

### –ü–æ–≤—ñ–ª—å–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–∞ CPU
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–µ–Ω—à—É –º–æ–¥–µ–ª—å:
```bash
python3 generate_ass_subs.py audio.mp3 subs.ass --model tiny
```

–ê–±–æ —É–≤—ñ–º–∫–Ω—ñ—Ç—å GPU (—è–∫—â–æ —î CUDA):
```bash
python3 generate_ass_subs.py audio.mp3 subs.ass --device cuda
```

---

## üéØ –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –û—Å–≤—ñ—Ç–Ω—î –≤—ñ–¥–µ–æ –∑ —á–∏—Ç–∞–Ω–Ω—è–º
```bash
# –ë—ñ–ª—å—à–µ —Å–ª—ñ–≤ –¥–ª—è –ø–æ–≤—ñ–ª—å–Ω–æ–≥–æ —á–∏—Ç–∞–Ω–Ω—è
python3 generate_ass_subs.py lecture.mp3 lecture.ass --words-per-subtitle 8
```

### –®–≤–∏–¥–∫–µ –≤—ñ–¥–µ–æ –¥–ª—è —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö –º–µ—Ä–µ–∂
```bash
# –ú–µ–Ω—à–µ —Å–ª—ñ–≤ –¥–ª—è –¥–∏–Ω–∞–º—ñ–∫–∏
python3 generate_ass_subs.py reel.mp3 reel.ass --words-per-subtitle 3
```

### –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
```bash
# Whisper –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å –º–æ–≤—É
python3 generate_ass_subs.py multilang.mp3 subs.ass --model large
```

---

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- **faster-whisper:** https://github.com/SYSTRAN/faster-whisper
- **pysubs2:** https://pysubs2.readthedocs.io/
- **ASS —Ç–µ–≥–∏:** https://aeg-dev.github.io/AegiSub-Manual/
- **libass:** https://github.com/libass/libass

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

–ù–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ ASS —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ –∑ –∫–∞—Ä–∞–æ–∫–µ-–µ—Ñ–µ–∫—Ç–æ–º:
- ‚úÖ –ü—ñ–¥—Å–≤—ñ—á—É—î –∫–æ–∂–Ω–µ —Å–ª–æ–≤–æ —Ç–æ—á–Ω–æ –≤ –º–æ–º–µ–Ω—Ç –∑–≤—É—á–∞–Ω–Ω—è
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —à–≤–∏–¥—à–∏–π faster-whisper (4-5x –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è)
- ‚úÖ –î–∞—î –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å—Ç–∏–ª–µ–º —Ç–∞ –∫–æ–ª—å–æ—Ä–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∞ –≤ build_slideshow.js
- ‚úÖ –°—É–º—ñ—Å–Ω–∞ –∑ —É—Å—ñ–º–∞ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –≤—ñ–¥–µ–æ

**–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `build_slideshow.js` —è–∫ –∑–≤–∏—á–∞–π–Ω–æ - –≤—Å–µ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ!** üöÄ
